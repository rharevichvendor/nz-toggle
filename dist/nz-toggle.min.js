!function(){var e=angular.module("nzToggle",[]);e.directive("nzToggle",["$timeout",function(e){return{restrict:"E",replace:!0,scope:{config:"=?",ngModel:"=",onToggle:"&",ngDisabled:"="},template:['<div class="nz-toggle-wrap" ng-class="getStyle()" ng-style="wrapStyle">','   <div class="nz-toggle">','       <div class="nz-toggle-handle"></div>',"   </div>",'   <div class="nz-toggle-tooltip" ng-show="tooltip">',"       <span ng-class=\"{'active': showTooltip1}\">",'           <span ng-show="tipFalse"></span>{{tipFalse}}',"       </span>",'       <br ng-show="vertical">','       <span ng-class="{\'active\': showTooltip2}" ng-show="triToggle">','           <span ng-show="tipNull"></span>{{tipNull}}',"       </span>",'       <br ng-show="vertical">',"       <span ng-class=\"{'active': showTooltip3}\">",'           <span ng-show="tipTrue"></span>{{tipTrue}}',"       </span>","   </div>","</div>"].join(""),link:function(l,t,o){function a(){u(),y(D.ngModel)||(y(D.valDefault)?D.ngModel=D.valDefault:D.triToggle?D.ngModel=D.valNull:D.ngModel=D.valFalse);var e=!0;D.$watch("ngModel",function(){if(d(),e)return void(e=!1);if(D.onToggle.call){var l=D.onToggle();l&&l.call&&l(D.ngModel)}},!0),p(t[0],"mousedown",n),p(t[0],"click",i),D.$on("$destroy",function(){v(t[0],"mousedown",n),v(window,"mousemove",r),v(window,"mouseup",s),v(t[0],"click",i)})}function i(e){T<1&&c()}function n(e){if(!D.ngDisabled)return e=e?e:window.event,h={x:e.pageX||e.touches[0].pageX,y:e.pageY||e.touches[0].pageY},T=0,M.css("transition","0s"),p(window,"mousemove",r),p(window,"mouseup",s),e.stopPropagation(),e.returnValue=!1,!1}function r(e){e=e?e:window.event;var l=(e.pageY||e.touches[0].pageY)-h.y,o=(e.pageX||e.touches[0].pageX)-h.x,a=t[0].offsetHeight,i=t[0].offsetWidth,n=l/(a/2)*100,r=o/(i/2)*100;return D.vertical?(f=parseFloat(F.vertical[D.state]),w=Math.max(Math.min(parseFloat(n+f),100),0),m=f+(w-f)/2,M.css("top",m+"%")):(f=parseFloat(F.horizontal[D.state]),w=Math.max(Math.min(parseFloat(r+f),100),0),m=f+(w-f)/2,M.css("left",m+"%")),T=Math.max(T,Math.max(Math.abs(l),Math.abs(o))),e.stopPropagation(),e.returnValue=!1,!1}function s(e){return e=e?e:window.event,h=!1,D.$apply(function(){if(!(T<1&&"mouseup"==e.type))return T<1&&"touchend"==e.type?void c():D.triToggle?D.vertical?w>73?void c("false"):w>27?void c("null"):void c("true"):w<27?void c("false"):w<73?void c("null"):void c("true"):D.vertical?w>50?void c("false"):void c("true"):w<50?void c("false"):void c("true")}),M.css({top:"",left:"",transition:""}),v(window,"mousemove",r),v(window,"mouseup",s),e.stopPropagation(),e.returnValue=!1,!1}function u(){if(angular.extend(D,N,D.config||{}),y(o.triToggle)&&(D.triToggle=!0),angular.forEach(["valDefault","valTrue","valFalse","valNull","width","height","colorFalse","colorNull","colorTrue"],function(e){y(o[e])&&(D[e]=D.$eval(o[e]))}),angular.forEach(["tipTrue","tipFalse","tipNull"],function(e){y(o[e])&&D.$watch(o[e],function(l){D[e]=l})}),(D.tipTrue||o.tipFalse||o.tipNull)&&(D.tooltip=!0),y(o.vertical)){D.vertical=!0;var e;D.tooltip&&(e=D.tipTrue,D.tipTrue=D.tipFalse,D.tipFalse=e),D.$eval(o.width)||D.$eval(o.width)||D.config&&(D.config.width||D.config.height)||(e=D.width,D.width=D.height,D.height=e)}D.wrapStyle={width:D.width+"px",height:D.height+"px"},y(D.outerRadius)||(D.outerRadius=Math.min(D.width,D.height)/2),D.innerRadius=D.outerRadius-D.padding}function g(){return[D.vertical?"vertical":"horizontal",D.state]}function d(){return D.showTooltip1=!1,D.showTooltip2=!1,D.showTooltip3=!1,angular.equals(D.ngModel,D.valTrue)?(D.wrapStyle.backgroundColor=D.colorTrue,D.state="true",void(D.vertical?D.showTooltip1=!0:D.showTooltip3=!0)):angular.equals(D.ngModel,D.valFalse)?(D.state="false",D.wrapStyle.backgroundColor=D.colorFalse,void(D.vertical?D.showTooltip3=!0:D.showTooltip1=!0)):(D.state="null",D.wrapStyle.backgroundColor=D.colorNull,void(D.showTooltip2=!0))}function c(l){D.ngDisabled||e(function(){if(l){if(D.state=l,"false"===l)return void(D.ngModel=D.valFalse);if("null"===l)return void(D.ngModel=D.valNull);D.ngModel=D.valTrue}else{if("false"==D.state)return void(D.ngModel=D.triToggle?D.valNull:D.valTrue);if("null"==D.state)return void(D.ngModel=D.valTrue);D.ngModel=D.valFalse}})}function p(e,l,t){for(var o=l.split(" "),a=0,i=o.length;a<i;a++)e.addEventListener(o[a],t,!1)}function v(e,l,t){for(var o=l.split(" "),a=0,i=o.length;a<i;a++)e.removeEventListener(o[a],t,!1)}var h,f,w,T,m,M=angular.element(t[0].querySelector(".nz-toggle-handle")),F={horizontal:{"false":0,"null":50,"true":100},vertical:{"false":100,"null":50,"true":0}},y=angular.isDefined,N=(angular.copy,{vertical:!1,valTrue:!0,valFalse:!1,valNull:null,width:50,height:25,padding:3,colorTrue:"#60BD68",colorFalse:"#F15854",colorNull:"#DDD",tooltip:!1}),D=l;angular.extend(D,{getStyle:g,toggle:c}),a()}}}])}();